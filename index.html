<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApesTogether Book Club | Primates who Read</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
<header>
    <div class="container">
        <div class="logo-title">
            <div class="logo">ü¶ç</div>
            <div class="title">
                <h1>ApesTogether Book Club</h1>
                <h2>Primates who Read</h2>
            </div>
        </div>
    </div>
</header>

<nav>
    <div class="container">
        <ul class="nav-links">
            <li><a href="#current">Current Book</a></li>
            <li><a href="#past">Past Books</a></li>
            <li><a href="#members">Members</a></li>
            <li><a href="#leaderboard">Leaderboard</a></li>
        </ul>
    </div>
</nav>

<section id="current">
    <div class="container">
        <div class="section-title">
            <h3>Our Current Book</h3>
        </div>

        <div class="current-book">
            <div class="book-cover">
                <img src="https://ia801909.us.archive.org/view_archive.php?archive=/31/items/l_covers_0013/l_covers_0013_14.zip&file=0013147201-L.jpg"
                     alt="The Haunting of Hill House" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
            <div class="book-info">
                <h3>The Haunting of Hill House</h3>
                <h4>by Shirley Jackson</h4>

                <p>A chilling and critically acclaimed gothic horror novel that follows four people as they spend time
                    in the mysterious and possibly haunted Hill House, unraveling psychological terror and supernatural
                    mystery.</p>

                <div class="meeting-details">
                    <p><strong>Next Meeting:</strong> Tuesday, August 12th</p>
                    <p><strong>Location:</strong> Discord</p>
                    <p><strong>Discussion Leader:</strong> TBD</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="past">
    <div class="container">
        <div class="section-title">
            <h3>Past Books</h3>
        </div>

        <div class="book-card">
            <div class="card-cover">
                <img src="https://covers.openlibrary.org/b/id/12866714-L.jpg" alt="Babel"
                     style="width: 100%; height: 100%; object-fit: cover;">
            </div>
            <div class="card-info">
                <h4>Babel</h4>
                <p>by R.F. Kuang</p>
                <p>July 2025</p>
            </div>
        </div>

        <div class="reading-list">
            <div class="book-card">
                <div class="card-cover">
                    <img src="https://covers.openlibrary.org/b/id/14637487-L.jpg" alt="Fear and Loathing in Las Vegas"
                         style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-info">
                    <h4>Fear and Loathing in Las Vegas</h4>
                    <p>by Hunter S. Thompson</p>
                    <p>June 2025</p>
                </div>
            </div>
            <div class="book-card">
                <div class="card-cover">
                    <img src="https://covers.openlibrary.org/b/isbn/0446601977-L.jpg" alt="Parable of the Sower"
                         style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-info">
                    <h4>Parable of the Sower</h4>
                    <p>by Octavia Butler</p>
                    <p>May 2025</p>
                </div>
            </div>
            <div class="book-card">
                <div class="card-cover">
                    <img src="https://prodimage.images-bn.com/pimages/9780802164667_p0_v2_s1200x1200.jpg"
                         alt="Vanishing World" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-info">
                    <h4>Vanishing World</h4>
                    <p>by Sayaka Murata</p>
                    <p>April 2025</p>
                </div>
            </div>

            <div class="book-card">
                <div class="card-cover">
                    <img src="https://covers.openlibrary.org/b/isbn/1613743416-L.jpg"
                         alt="Roadside Picnic by Arkady and Boris Strugatsky"
                         style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-info">
                    <h4>Roadside Picnic</h4>
                    <p>by Arkady and Boris Strugatsky</p>
                    <p>April 2025</p>
                </div>
            </div>

            <div class="book-card">
                <div class="card-cover">
                    <img src="https://covers.openlibrary.org/b/isbn/9780385534260-L.jpg" alt="The Wager by David Grann"
                         style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-info">
                    <h4>The Wager</h4>
                    <p>by David Grann</p>
                    <p>March 2025</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="members">
    <div class="container">
        <div class="section-title"><h3>Our Members</h3></div>
        <div id="member-cards" class="members"></div>
    </div>
</section>

<section id="leaderboard">
    <div class="container">
        <div class="section-title"><h3>Leaderboard</h3></div>
        <ol id="leaderboard-list" class="leaderboard"></ol>
    </div>
</section>


<footer>
    <p class="footer-text">¬© 2025 ApesTogether Book Club. All rights reserved.</p>
</footer>
</body>
<script>
    let bookClubData = null;

    // Load data from JSON file
    async function loadBookClubData() {
        try {
            const response = await fetch('data.json');
            bookClubData = await response.json();
            createMemberCards();
            createLeaderboard();
        } catch (error) {
            console.error('Error loading book club data:', error);
        }
    }

    function createMemberCards() {
        if (!bookClubData) return;

        const memberCardSection = document.getElementById('member-cards');
        memberCardSection.innerHTML = '';

        for (let memberName in bookClubData.members) {
            const member = bookClubData.members[memberName];

            console.log(member);

            const memberCard = document.createElement('div');
            memberCard.className = 'member-card';
            memberCard.classList.add(member.active ? 'active' : 'inactive');

            // Avatar
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'member-avatar';
            avatarDiv.textContent = member.avatar;
            memberCard.appendChild(avatarDiv);

            // Info container
            const infoDiv = document.createElement('div');
            infoDiv.className = 'member-info';

            // Name and badges
            const nameHeading = document.createElement('h4');
            nameHeading.textContent = memberName + ' ';

            member.booksRead.forEach(bookKey => {
                const book = bookClubData.books[bookKey];

                // Badge container
                const badgeSpan = document.createElement('span');
                badgeSpan.className = 'badge';
                badgeSpan.textContent = book.emoji;

                // Tooltip
                const tooltipSpan = document.createElement('span');
                tooltipSpan.className = 'badge-tooltip';
                tooltipSpan.textContent = `${book.title} - ${book.dateRead}`;

                // Nest tooltip inside badge
                badgeSpan.appendChild(tooltipSpan);

                // Append badge to heading
                nameHeading.appendChild(badgeSpan);
            });

            // Role/description
            const rolePara = document.createElement('p');
            rolePara.textContent = member.role;

            // Put together info block
            infoDiv.appendChild(nameHeading);
            infoDiv.appendChild(rolePara);
            memberCard.appendChild(infoDiv);

            // Append to the page (assuming you have a section called memberCardSection)
            memberCardSection.appendChild(memberCard);
        }

    }

    function createLeaderboard() {
        if (!bookClubData) return;

        const leaderboardList = document.getElementById('leaderboard-list');
        leaderboardList.innerHTML = '';

        const memberEntries = Object.entries(bookClubData.members);

        // Sort by books read, descending
        memberEntries.sort((a, b) => b[1].booksRead.length - a[1].booksRead.length);

        // Take only the top 3
        const topThree = memberEntries.slice(0, 3);

        topThree.forEach(([name, data], index) => {
            const listItem = document.createElement('li');
            listItem.className = 'leaderboard-entry card';

            if (index === 0) {
                listItem.classList.add('first-place');
            }

            listItem.innerHTML = `
            <div class="leaderboard-card">
                <div class="leaderboard-left-info">
                    <span class="name">${name}</span>
                </div>
                <div class="leaderboard-right-info">
                    <span class="avatar">${data.avatar}</span>
                    <span class="count">${data.booksRead.length} books</span>
                </div>
            </div>
        `;

            leaderboardList.appendChild(listItem);
        });
    }


    // Load data when page loads
    document.addEventListener('DOMContentLoaded', loadBookClubData);
</script>
</html>
